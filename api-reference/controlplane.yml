components:
  schemas:
    ACL:
      type: object
      description: ACL
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          id:
            type: string
            description: ACL id
          resource_id:
            type: string
            description: Resource ID
          resource_type:
            type: string
            description: Resource type
          role:
            type: string
            description: Role
          subject_id:
            type: string
            description: Subject ID
          subject_type:
            type: string
            description: Subject type
          workspace:
            type: string
            description: Workspace name
    ApiKey:
      type: object
      description: Long-lived API key for accessing Beamlit
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          api_key:
            type: string
            description: Api key
          comment:
            type: string
            description: Comment for the API key
          expires_in:
            type: string
            description: Duration until expiration (in seconds)
          sub:
            type: string
            description: User subject identifier
          sub_type:
            type: string
            description: Subject type
    ArrayMetric:
      type: array
      description: Array of metrics
      items:
        $ref: '#/components/schemas/Metric'
    DeploymentPolicies:
      type: array
      items:
        type: string
        description: Policy name
    DeploymentServerlessConfig:
      type: object
      description: Configuration for the serverless model deployment
      properties:
        last_pod_retention_period:
          type: string
          description: The last pod retention period
        max_num_replicas:
          type: integer
          description: The maximum number of replicas
        metric:
          type: string
          description: Metric to scale on, can be "cpu" or "memory" or "rps" or "concurrency"
        min_num_replicas:
          type: integer
          description: The minimum number of replicas
        scale_down_delay:
          type: string
          description: The scale down delay
        scale_up_minimum:
          type: integer
          description: The scale up minimum
        stable_window:
          type: string
          description: The stable window
        target:
          type: string
          description: Target value for the metric
        termination_grace_period_seconds:
          type: integer
          description: The termination grace period seconds
    Environment:
      type: object
      description: Environment on which deployments will be made (e.g. development,
        production), enforcing multiple policies at once.
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          display_name:
            type: string
            description: The display name of the environment
          labels:
            $ref: '#/components/schemas/Labels'
          name:
            type: string
            description: The name of the environment
          policies:
            type: array
            description: The policies attached to the environment
            items: {}
          workspace:
            type: string
            description: The workspace the environment belongs to
    EnvironmentMetrics:
      type: object
      description: Metrics for the environment
      properties:
        inference_per_second_global:
          $ref: '#/components/schemas/ArrayMetric'
          description: Inference metrics for the environment globally
    Flavor:
      type: object
      description: A type of hardware available for deployments
      properties:
        name:
          type: string
          description: Flavor name (e.g. t4)
        type:
          type: string
          description: Flavor type (e.g. cpu, gpu)
    Flavors:
      type: array
      description: Types of hardware available for deployments
      items:
        $ref: '#/components/schemas/Flavor'
    Labels:
      type: object
      description: Labels
      properties:
        string:
          type: string
    Location:
      description: Location availability for policies
      properties:
        continent:
          description: Location continent
          type: string
        country:
          description: Location country
          type: string
        flavors:
          description: Location flavors
          items:
            $ref: '#/components/schemas/Flavor'
          type: array
        location:
          description: Location name
          type: string
        name:
          description: Location name
          type: string
        status:
          description: Location status
          type: string
      type: object
    LocationResponse:
      type: object
      description: Location availability for policies
      properties:
        continent:
          type: string
          description: Continent of the location
        country:
          type: string
          description: Country of the location
        flavors:
          type: array
          description: Flavors available in the location
          items:
            $ref: '#/components/schemas/Flavor'
        location:
          type: string
          description: Name of the location
        status:
          type: string
          description: Status of the location
    Metric:
      type: object
      description: Metric
      properties:
        timestamp:
          type: string
          description: Metric timestamp
        value:
          type: string
          description: Metric value
    Metrics:
      type: object
      description: Metrics for resources
      properties:
        models:
          description: Metrics for models
    Model:
      type: object
      description: Logical object representing a model, that can be instantiated in
        multiple environments as model deployments
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          display_name:
            type: string
            description: Model display name
          labels:
            $ref: '#/components/schemas/Labels'
          name:
            type: string
            description: Model name
          workspace:
            type: string
            description: The workspace the model belongs to
    ModelDeployment:
      type: object
      description: An instance of a model, deployed in a specific environment
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          enabled:
            type: boolean
            description: If false, the model deployment will not be active nor serve
              requests
          environment:
            type: string
            description: The name of the environment in which the model deployment
              is deployed
          labels:
            $ref: '#/components/schemas/Labels'
          metric_port:
            type: integer
            description: The port to serve the metrics on
          model:
            type: string
            description: The name of the parent model
          model_provider_ref:
            $ref: '#/components/schemas/ModelProviderRef'
          pod_template:
            type: object
            description: The pod template, should be a valid Kubernetes pod template
          policies:
            $ref: '#/components/schemas/DeploymentPolicies'
            description: The policies attached to the model deployment directly
          runtime_configuration:
            $ref: '#/components/schemas/RuntimeConfiguration'
            description: The configurations for which model is being served and how
              it is served
          runtime_model:
            type: string
            description: The slug name of the model origin
          runtime_type:
            type: string
            description: The type of the model origin
          serverless_config:
            $ref: '#/components/schemas/DeploymentServerlessConfig'
          serving_port:
            type: integer
            description: The port to serve the model on
          workspace:
            type: string
            description: The workspace the model deployment belongs to
    ModelDeploymentLog:
      type: object
      description: Log for a model deployment
      properties:
        message:
          type: string
          description: Content of the log
        timestamp:
          type: string
          description: The timestamp of the log
    ModelDeploymentMetrics:
      type: object
      description: Metrics for a single model deployment
      properties:
        inference_per_second_global:
          $ref: '#/components/schemas/ArrayMetric'
          description: Historical requests per second (RPS), for the model deployment
            globally
        inference_per_second_per_region:
          type: object
          description: Historical requests per second (RPS) per location, for the
            model deployment
          properties:
            region:
              $ref: '#/components/schemas/ArrayMetric'
        query_per_second_global:
          type: number
          description: RPS value (in last 24 hours) for the model deployment globally
        query_per_second_per_code_global:
          $ref: '#/components/schemas/QPS'
          description: RPS value (in last 24 hours) per response status code, for
            the model deployment globally
        query_per_second_per_region:
          $ref: '#/components/schemas/QPS'
          description: RPS value (in last 24 hours) per location, for the model deployment
        query_per_second_per_region_per_code:
          type: object
          description: RPS value (in last 24 hours) per response status code per location,
            for the model deployment
          properties:
            region:
              $ref: '#/components/schemas/QPS'
    ModelMetrics:
      type: object
      description: Metrics for a single model
      properties:
        inference_per_second_global:
          $ref: '#/components/schemas/ArrayMetric'
          description: Historical requests per second (RPS), for the model globally
        query_per_second_per_region:
          $ref: '#/components/schemas/QPS'
          description: RPS value (in last 24 hours) per location, for the model
    ModelPolicies:
      description: Policies to apply to the model deployment
      items:
        description: Policy name
        type: string
      type: array
    ModelProvider:
      type: object
      description: Model provider
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          comment:
            type: string
            description: Model provider comment
          config:
            $ref: '#/components/schemas/ProviderConfig'
          labels:
            $ref: '#/components/schemas/Labels'
          name:
            type: string
            description: Model provider name
          type:
            type: string
            description: Model provider type
          workspace:
            type: string
            description: Workspace name
    ModelProviderRef:
      type: object
      description: Reference to a model provider
      properties:
        kind:
          type: string
          description: The kind of the model provider, can be Provider
        name:
          type: string
          description: The name of the model provider
    ModelRelease:
      type: object
      description: Model release, used to deploy a model from one environment to another
      properties:
        from:
          type: string
          description: Origin environment from which the model is released
        to:
          type: string
          description: Destination environment to which the model is released
    PendingInvitation:
      type: object
      description: Pending invitation in workspace
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          email:
            type: string
            description: User email
          invited_by:
            type: string
            description: User sub
          role:
            type: string
            description: ACL role
          workspace:
            type: string
            description: Workspace name
    PendingInvitationAccept:
      type: object
      description: Pending invitation accept
      properties:
        email:
          type: string
          description: User email
        workspace:
          $ref: '#/components/schemas/Workspace'
    PendingInvitationRender:
      type: object
      description: Pending invitation in workspace
      properties:
        email:
          type: string
          description: User email
        invited_at:
          type: string
          description: Invitation date
        invited_by:
          $ref: '#/components/schemas/PendingInvitationRenderInvitedBy'
        role:
          type: string
          description: ACL role
        user_number:
          type: number
          description: Number of users in the workspace
        workspace:
          $ref: '#/components/schemas/PendingInvitationRenderWorkspace'
    PendingInvitationRenderInvitedBy:
      type: object
      description: Invited by
      properties:
        email:
          type: string
          description: User email
        family_name:
          type: string
          description: User family name
        given_name:
          type: string
          description: User given name
        sub:
          type: string
          description: User sub
    PendingInvitationRenderWorkspace:
      type: object
      description: Workspace
      properties:
        display_name:
          type: string
          description: Workspace display name
        name:
          type: string
          description: Workspace name
    Policy:
      type: object
      description: Rule that controls how a deployment is made and served (e.g. location
        restrictions)
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          display_name:
            type: string
            description: Policy display name
          flavors:
            $ref: '#/components/schemas/Flavors'
            description: Flavors allowed by the policy. If not set, all flavors are
              allowed.
          labels:
            $ref: '#/components/schemas/Labels'
          locations:
            $ref: '#/components/schemas/PolicyLocations'
            description: Locations allowed by the policy. If not set, all locations
              are allowed.
          name:
            type: string
            description: Policy name
          type:
            type: string
            description: Policy type, can be location or flavor
          workspace:
            type: string
            description: The workspace the policy belongs to
    PolicyGpu:
      description: Policy GPU
      items:
        description: GPU name
        type: string
      type: array
    PolicyLocation:
      type: object
      description: Policy location
      properties:
        name:
          type: string
          description: Policy location name
        type:
          type: string
          description: Policy location type
    PolicyLocations:
      type: array
      description: PolicyLocations is a local type that wraps a slice of Location
      items:
        $ref: '#/components/schemas/PolicyLocation'
    ProviderConfig:
      type: object
      description: Model provider config
      properties:
        access_token:
          type: string
          description: The access token to use for the provider
        filename:
          type: string
          description: The file name to use for the model
        presigned_url:
          type: array
          description: The presigned URLs to upload the model to
          items: {}
        runtime_configuration:
          $ref: '#/components/schemas/RuntimeConfiguration'
    ProviderModel:
      type: object
      description: Model obtained from an external provider, such as HuggingFace,
        OpenAI, etc...
      properties:
        created_at:
          type: string
          description: Provider model created at
        downloads:
          type: integer
          description: Provider model downloads
        id:
          type: string
          description: Provider model ID
        library_name:
          type: string
          description: Provider model library name
        likes:
          type: integer
          description: Provider model likes
        name:
          type: string
          description: Provider model name
        pipeline_tag:
          type: string
          description: Provider model pipeline tag
        private:
          type: boolean
          description: Provider model private
        tags:
          type: array
          description: Provider model tags
          items:
            type: string
        trending_score:
          type: integer
          description: Provider model trending score
    ProviderOrganization:
      type: object
      description: Organization that hosts models from an external provider (HuggingFace,
        OpenAI, etc...)
      properties:
        avatar_url:
          type: string
          description: Provider organization avatar URL
        display_name:
          type: string
          description: Provider organization display name
        id:
          type: string
          description: Provider organization ID
        name:
          type: string
          description: Provider organization name
    QPS:
      type: object
      description: Query per second per element, can be per response status code (e.g.
        200, 400) or per location
      properties:
        region_code:
          type: number
          description: QPS for location
    RuntimeConfiguration:
      type: object
      description: Runtime configuration for the model deployment
      properties:
        args:
          type: array
          description: The arguments to pass to the model
          items: {}
        envs:
          type: array
          description: The environment variables to set in the model, should be a
            valid Kubernetes environment config
          items: {}
        image:
          type: string
          description: The image to use
        readiness_probe:
          type: object
          description: The readiness probe
        resources:
          type: object
          description: The resources with k8s spec for the model
    ServerlessConfig:
      description: Configuration for the serverless model deployment
      properties:
        last_pod_retention_period:
          description: The last pod retention period
          type: string
        max_num_replicas:
          description: The maximum number of replicas
          type: integer
        metric:
          description: Metric to scale on, can be "cpu" or "memory" or "rps" or "concurrency"
          type: string
        min_num_replicas:
          description: The minimum number of replicas
          type: integer
        scale_down_delay:
          description: The scale down delay
          type: string
        scale_up_minimum:
          description: The scale up minimum
          type: integer
        stable_window:
          description: The stable window
          type: string
        target:
          description: Target value for the metric
          type: string
        termination_grace_period_seconds:
          description: The termination grace period seconds
          type: integer
      type: object
    StandardFieldsDynamoDb:
      type: object
      description: Standard fields for Persistance
      properties:
        created_at:
          type: string
          description: The date and time when the resource was created
        updated_at:
          type: string
          description: The date and time when the resource was updated
    StoreAgentTool:
      type: object
      description: Store agent tool
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          description:
            type: string
            description: Store agent tool description
          display_name:
            type: string
            description: Store agent tool display name
          image:
            type: string
            description: Store agent tool image
          labels:
            type: object
            description: Store agent tool labels
          name:
            type: string
            description: Store agent tool name
          parameters:
            type: array
            description: Store agent tool parameters
            items:
              $ref: '#/components/schemas/StoreAgentToolParameter'
    StoreAgentToolParameter:
      type: object
      description: Store agent tool parameter
      properties:
        description:
          type: string
          description: Store agent tool parameter description
        name:
          type: string
          description: Store agent tool parameter name
        required:
          type: boolean
          description: Store agent tool parameter required
        type:
          type: string
          description: Store agent tool parameter type
    StoreTool:
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          description:
            description: Store agent tool description
            type: string
          display_name:
            description: Store agent tool display name
            type: string
          image:
            description: Store agent tool image
            type: string
          labels:
            description: Store agent tool labels
            type: object
          name:
            description: Store agent tool name
            type: string
          parameters:
            description: Store agent tool parameters
            items:
              $ref: '#/components/schemas/StoreToolParameter'
            type: array
      description: Store agent tool
      type: object
    StoreToolParameter:
      description: Store agent tool parameter
      properties:
        description:
          description: Store agent tool parameter description
          type: string
        name:
          description: Store agent tool parameter name
          type: string
        required:
          description: Store agent tool parameter required
          type: boolean
        type:
          description: Store agent tool parameter type
          type: string
      type: object
    Tool:
      type: object
      description: Tool parent of ToolDeployment
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          description:
            type: string
            description: Tool description, very important for the agent tool to work
              with an LLM
          display_name:
            type: string
            description: Tool display name
          labels:
            $ref: '#/components/schemas/Labels'
          name:
            type: string
            description: Tool name
          parameters:
            type: array
            description: Tool parameters, for your function to be callable with Agent
            items:
              $ref: '#/components/schemas/StoreAgentToolParameter'
          store_id:
            type: string
            description: Create from a store registered tool
          workspace:
            type: string
            description: Workspace name
    ToolDeployment:
      type: object
      description: Tool deployment configuration
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          enabled:
            type: boolean
            description: Whether the tool deployment is enabled
          environment:
            type: string
            description: The name of the environment
          labels:
            $ref: '#/components/schemas/Labels'
          pod_template:
            type: object
            description: The pod template, should be a valid Kubernetes pod template
          policies:
            $ref: '#/components/schemas/DeploymentPolicies'
          runtime_configuration:
            $ref: '#/components/schemas/RuntimeConfiguration'
          serverless_config:
            $ref: '#/components/schemas/DeploymentServerlessConfig'
          tool:
            type: string
            description: The name of the tool
          workspace:
            type: string
            description: The workspace the tool deployment belongs to
    ToolPolicies:
      description: Policies to apply to the model deployment
      items:
        description: Policy name
        type: string
      type: array
    ToolProviderRef:
      description: Reference to a model provider
      properties:
        kind:
          description: The kind of the model provider, can be Provider
          type: string
        name:
          description: The name of the model provider
          type: string
      type: object
    Workspace:
      type: object
      description: Workspace
      allOf:
      - $ref: '#/components/schemas/StandardFieldsDynamoDb'
      - properties:
          display_name:
            type: string
            description: Workspace display name
          labels:
            type: object
            description: Workspace labels
          name:
            type: string
            description: Workspace name
    WorkspaceUser:
      type: object
      description: Workspace user
      properties:
        accepted:
          type: boolean
          description: Whether the user has accepted the workspace invitation
        email:
          type: string
          description: Workspace user email
        email_verified:
          type: boolean
          description: Whether the user's email has been verified
        family_name:
          type: string
          description: Workspace user family name
        given_name:
          type: string
          description: Workspace user given name
        role:
          type: string
          description: Workspace user role
        sub:
          type: string
          description: Workspace user identifier
  securitySchemes:
    BearerAuth:
      bearerFormat: JWT
      scheme: bearer
      type: http
info:
  title: Beamlit Control Plane
  version: 0.0.1
openapi: 3.0.3
paths:
  /environments:
    get:
      operationId: ListEnvironments
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Environment'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - environments:list
      summary: List all environments
      tags:
      - environments
  /environments/{environmentName}:
    delete:
      operationId: DeleteEnvironment
      parameters:
      - description: Name of the environment
        in: path
        name: environmentName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Environment'
          description: successful operation
      security:
      - BearerAuth:
        - environments:delete
      summary: Delete environment by name
      tags:
      - environments
    get:
      operationId: GetEnvironment
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Environment'
          description: successful operation
      security:
      - BearerAuth:
        - environments:get
      summary: Get environment by name
      tags:
      - environments
    parameters:
    - description: Name of the environment
      in: path
      name: environmentName
      required: true
      schema:
        type: string
    put:
      operationId: PutEnvironment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Environment'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Environment'
          description: successful operation
      security:
      - BearerAuth:
        - environments:update
      summary: Create or Update environment by name
      tags:
      - environments
  /environments/{environmentName}/metrics:
    get:
      operationId: GetEnvironmentMetrics
      parameters:
      - description: Name of the environment
        in: path
        name: environmentName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EnvironmentMetrics'
          description: successful operation
      security:
      - BearerAuth:
        - environments_metrics:get
      summary: Get environment metrics by name
      tags:
      - environments
  /locations:
    get:
      operationId: ListLocations
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Location'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - locations:list
      summary: List all locations available with status
      tags:
      - locations
  /metrics:
    get:
      operationId: GetMetrics
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Metrics'
          description: successful operation
      security:
      - BearerAuth:
        - metrics:get
      summary: Get metrics for a workspace
      tags:
      - metrics
  /model_providers:
    get:
      operationId: ListModelProviders
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ModelProvider'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - model_providers:list
      summary: List all model providers
      tags:
      - model_providers
  /model_providers/{providerId}:
    delete:
      operationId: DeleteModelProvider
      parameters:
      - description: ID of the provider
        in: path
        name: providerId
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelProvider'
          description: successful operation
      security:
      - BearerAuth:
        - model_providers:delete
      summary: Delete model provider by id
      tags:
      - model_providers
    get:
      operationId: GetModelProvider
      parameters:
      - description: ID of the provider
        in: path
        name: providerId
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelProvider'
          description: successful operation
      security:
      - BearerAuth:
        - model_providers:get
      summary: Get model provider by id
      tags:
      - model_providers
    put:
      operationId: PutModelProvider
      parameters:
      - description: ID of the provider
        in: path
        name: providerId
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelProvider'
          description: successful operation
      security:
      - BearerAuth:
        - model_providers:create
        - model_providers:update
      summary: Create or Update model provider by id
      tags:
      - model_providers
  /models:
    get:
      operationId: ListModels
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Model'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - models:list
      summary: List all models
      tags:
      - models
  /models/{modelName}:
    delete:
      operationId: DeleteModel
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Model'
          description: successful operation
      security:
      - BearerAuth:
        - models:delete
      summary: Delete model by name
      tags:
      - models
    get:
      operationId: GetModel
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Model'
          description: successful operation
      security:
      - BearerAuth:
        - models:get
      summary: Get model by name
      tags:
      - models
    parameters:
    - description: Name of the model
      in: path
      name: modelName
      required: true
      schema:
        type: string
    put:
      operationId: PutModel
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Model'
          description: successful operation
      security:
      - BearerAuth:
        - models:update
      summary: Update model by name
      tags:
      - models
  /models/{modelName}/deployments:
    get:
      operationId: ListModelDeployments
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ModelDeployment'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - model_deployments:list
      summary: List all model deployments
      tags:
      - models
    parameters:
    - description: Name of the model
      in: path
      name: modelName
      required: true
      schema:
        type: string
  /models/{modelName}/deployments/{environmentName}:
    delete:
      operationId: DeleteModelDeployment
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelDeployment'
          description: successful operation
      security:
      - BearerAuth:
        - model_deployments:delete
      summary: Delete model deployment by environment name
      tags:
      - models
    get:
      operationId: GetModelDeployment
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelDeployment'
          description: successful operation
      security:
      - BearerAuth:
        - model_deployments:get
      summary: Get model deployment by environment name
      tags:
      - models
    parameters:
    - description: Name of the model
      in: path
      name: modelName
      required: true
      schema:
        type: string
    - description: Name of the environment
      in: path
      name: environmentName
      required: true
      schema:
        type: string
    put:
      operationId: PutModelDeployment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ModelDeployment'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelDeployment'
          description: successful operation
      security:
      - BearerAuth:
        - model_deployments:create
        - model_deployments:update
      summary: Create or update model deployment by environment name
      tags:
      - models
  /models/{modelName}/deployments/{environmentName}/logs:
    get:
      operationId: GetModelDeploymentLogs
      parameters:
      - description: Name of the model
        in: path
        name: modelName
        required: true
        schema:
          type: string
      - description: Name of the environment
        in: path
        name: environmentName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ModelDeploymentLog'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - model_deployments_logs:read
      tags:
      - models
  /models/{modelName}/deployments/{environmentName}/metrics:
    get:
      operationId: GetModelDeploymentMetrics
      parameters:
      - description: Name of the model
        in: path
        name: modelName
        required: true
        schema:
          type: string
      - description: Name of the environment
        in: path
        name: environmentName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelDeploymentMetrics'
          description: successful operation
      security:
      - BearerAuth:
        - model_deployments_metrics:read
      tags:
      - models
  /models/{modelName}/metrics:
    get:
      operationId: GetModelMetrics
      parameters:
      - description: Name of the model
        in: path
        name: modelName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelMetrics'
          description: successful operation
      security:
      - BearerAuth:
        - model_metrics:read
      summary: Get model metrics
      tags:
      - models
  /models/{modelName}/release:
    parameters:
    - description: Name of the model
      in: path
      name: modelName
      required: true
      schema:
        type: string
    post:
      operationId: CreateModelRelease
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ModelRelease'
          description: successful operation
      security:
      - BearerAuth:
        - model_releases:create
      summary: Create release for a model from an environment
      tags:
      - model_releases
  /policies:
    get:
      operationId: ListPolicies
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Policy'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - policies:list
      summary: List all policies
      tags:
      - policies
  /policies/{policyName}:
    delete:
      operationId: DeletePolicy
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Policy'
          description: successful operation
      security:
      - BearerAuth:
        - policies:delete
      summary: Delete policy by name
      tags:
      - policies
    get:
      operationId: GetPolicy
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Policy'
          description: successful operation
      security:
      - BearerAuth:
        - policies:get
      summary: Get policy by name
      tags:
      - policies
    parameters:
    - description: Name of the policy
      in: path
      name: policyName
      required: true
      schema:
        type: string
    put:
      operationId: PutPolicy
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Policy'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Policy'
          description: successful operation
      security:
      - BearerAuth:
        - policies:update
      summary: Update policy by name
      tags:
      - policies
  /profile/invitations:
    get:
      operationId: ListAllPendingInvitations
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/PendingInvitationRender'
                type: array
          description: successful operation
        "404":
          description: no pending invitations
      security:
      - BearerAuth:
        - invitations:list
      summary: List all pending invitations
      tags:
      - invitations
  /providers/{providerId}/models:
    get:
      operationId: ListModelsForProvider
      parameters:
      - description: ID of the provider
        in: path
        name: providerId
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ProviderModel'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - providers:list
      summary: List all models for a provider
      tags:
      - providers
  /providers/{providerId}/models/{modelRepoId}/{modelId}:
    get:
      operationId: GetModelWithRepoForProvider
      parameters:
      - description: ID of the provider
        in: path
        name: providerId
        required: true
        schema:
          type: string
      - description: Type of the model
        in: path
        name: modelRepoId
        required: true
        schema:
          type: string
      - description: ID of the model
        in: path
        name: modelId
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProviderModel'
          description: successful operation
      security:
      - BearerAuth:
        - providers:list
      summary: Get detail about a model for a provider
      tags:
      - providers
  /providers/{providerId}/organizations:
    get:
      operationId: ListOrganizationsForProvider
      parameters:
      - description: ID of the provider
        in: path
        name: providerId
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ProviderOrganization'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - providers:list
      summary: List all organizations for a provider
      tags:
      - providers
  /store/agent-tools:
    get:
      operationId: ListStoreAgentTools
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/StoreAgentTool'
                type: array
          description: successful operation
      summary: List all store agent tools
      tags:
      - store
  /store/agent-tools/{toolName}:
    get:
      operationId: GetStoreAgentTool
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StoreAgentTool'
          description: successful operation
      summary: Get store agent tool by name
      tags:
      - store
    parameters:
    - description: Name of the tool
      in: path
      name: toolName
      required: true
      schema:
        type: string
  /tools:
    get:
      operationId: ListTools
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Tool'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - tools:list
      summary: List all tools
      tags:
      - tools
  /tools/{toolName}:
    delete:
      operationId: DeleteTool
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tool'
          description: successful operation
      security:
      - BearerAuth:
        - tools:delete
      summary: Delete tool by name
      tags:
      - tools
    get:
      operationId: GetTool
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tool'
          description: successful operation
      security:
      - BearerAuth:
        - tools:get
      summary: Get tool by name
      tags:
      - tools
    parameters:
    - description: Name of the tool
      in: path
      name: toolName
      required: true
      schema:
        type: string
    put:
      operationId: PutTool
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Tool'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Tool'
          description: successful operation
      security:
      - BearerAuth:
        - tools:update
      summary: Update tool by name
      tags:
      - tools
  /tools/{toolName}/deployments:
    get:
      operationId: ListToolDeployments
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ToolDeployment'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - tool_deployments:list
      summary: List all tool deployments
      tags:
      - tools
    parameters:
    - description: Name of the tool
      in: path
      name: toolName
      required: true
      schema:
        type: string
  /tools/{toolName}/deployments/{environmentName}:
    delete:
      operationId: DeleteToolDeployment
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToolDeployment'
          description: successful operation
      security:
      - BearerAuth:
        - tool_deployments:delete
      summary: Delete tool deployment by environment name
      tags:
      - tools
    get:
      operationId: GetToolDeployment
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToolDeployment'
          description: successful operation
      security:
      - BearerAuth:
        - tool_deployments:get
      summary: Get tool deployment by environment name
      tags:
      - tools
    parameters:
    - description: Name of the tool
      in: path
      name: toolName
      required: true
      schema:
        type: string
    - description: Name of the environment
      in: path
      name: environmentName
      required: true
      schema:
        type: string
    put:
      operationId: PutToolDeployment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ToolDeployment'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToolDeployment'
          description: successful operation
      security:
      - BearerAuth:
        - tool_deployments:create
        - tool_deployments:update
      summary: Create or update tool deployment by environment name
      tags:
      - tools
  /workspaces:
    get:
      operationId: ListWorkspaces
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Workspace'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - workspaces:list
      summary: List all workspaces
      tags:
      - workspaces
    post:
      operationId: CreateWorspace
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Workspace'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workspace'
          description: successful operation
      security:
      - BearerAuth:
        - workspaces:create
      summary: Create worspace
      tags:
      - workspaces
  /workspaces/{workspaceName}:
    delete:
      operationId: DeleteWorkspace
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workspace'
          description: successful operation
      security:
      - BearerAuth:
        - workspaces:delete
      summary: Delete workspace by Name
      tags:
      - workspaces
    get:
      operationId: GetWorkspace
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workspace'
          description: successful operation
      security:
      - BearerAuth:
        - workspaces:get
      summary: Get Workspace
      tags:
      - workspaces
    put:
      operationId: UpdateWorkspace
      parameters:
      - description: name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Workspace'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workspace'
          description: successful operation
      security:
      - BearerAuth:
        - workspaces:update
      summary: Update workspace by Name
      tags:
      - workspaces
  /workspaces/{workspaceName}/decline:
    post:
      operationId: DeclineInvitationToWorkspace
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PendingInvitation'
          description: Invitation successfully declined
      security:
      - BearerAuth:
        - workspaces:decline
      summary: Decline invitation to workspace
      tags:
      - workspaces
  /workspaces/{workspaceName}/join:
    post:
      operationId: AcceptInvitationToWorkspace
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PendingInvitationAccept'
          description: Invitation successfully accepted
        "404":
          description: Workspace or invitation not found
      security:
      - BearerAuth:
        - workspaces:accept
      summary: Accept invitation to workspace
      tags:
      - workspaces
  /workspaces/{workspaceName}/leave:
    delete:
      operationId: LeaveWorkspace
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workspace'
          description: Workspace successfully left
        "404":
          description: Workspace not found
      security:
      - BearerAuth:
        - workspaces:leave
      summary: Leave workspace
      tags:
      - workspaces
  /workspaces/{workspaceName}/service_accounts:
    get:
      operationId: GetWorkspaceServiceAccounts
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  properties:
                    client_id:
                      description: Service account client ID
                      type: string
                    created_at:
                      description: Creation timestamp
                      type: string
                    description:
                      description: Service account description
                      type: string
                    name:
                      description: Service account name
                      type: string
                    updated_at:
                      description: Last update timestamp
                      type: string
                  type: object
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - workspaces:get
      summary: Get Workspace service accounts
      tags:
      - workspaces
    post:
      operationId: CreateWorkspaceServiceAccount
      parameters:
      - description: name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                description:
                  description: Service account description
                  type: string
                name:
                  description: Service account name
                  type: string
              required:
              - name
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                properties:
                  client_id:
                    description: Service account client ID
                    type: string
                  client_secret:
                    description: Service account client secret (only returned on creation)
                    type: string
                  created_at:
                    description: Creation timestamp
                    type: string
                  description:
                    description: Service account description
                    type: string
                  name:
                    description: Service account name
                    type: string
                  updated_at:
                    description: Last update timestamp
                    type: string
                type: object
          description: successful operation
      security:
      - BearerAuth:
        - workspaces:update
      summary: Create Workspace service account
      tags:
      - workspaces
  /workspaces/{workspaceName}/service_accounts/{clientId}:
    delete:
      operationId: DeleteWorkspaceServiceAccount
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      - description: Client ID
        in: path
        name: clientId
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                properties:
                  client_id:
                    description: Service account client ID
                    type: string
                  created_at:
                    description: Creation timestamp
                    type: string
                  description:
                    description: Service account description
                    type: string
                  name:
                    description: Service account name
                    type: string
                  updated_at:
                    description: Last update timestamp
                    type: string
                type: object
          description: successful operation
      security:
      - BearerAuth:
        - workspaces:update
      summary: Delete workspace service account by client id
      tags:
      - workspaces
    put:
      operationId: UpdateWorkspaceServiceAccount
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      - description: Client ID
        in: path
        name: clientId
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                description:
                  description: Service account description
                  type: string
                name:
                  description: Service account name
                  type: string
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                properties:
                  client_id:
                    description: Service account client ID
                    type: string
                  created_at:
                    description: Creation timestamp
                    type: string
                  description:
                    description: Service account description
                    type: string
                  name:
                    description: Service account name
                    type: string
                  updated_at:
                    description: Last update timestamp
                    type: string
                type: object
          description: successful operation
      security:
      - BearerAuth:
        - workspaces:update
      summary: Update workspace service account by client id
      tags:
      - workspaces
  /workspaces/{workspaceName}/service_accounts/{clientId}/api_keys:
    get:
      operationId: ListApiKeysForServiceAccount
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/ApiKey'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - api_key:list
      summary: List api keys for service account
      tags:
      - workspaces
    parameters:
    - description: Name of the workspace
      in: path
      name: workspaceName
      required: true
      schema:
        type: string
    - description: Client ID
      in: path
      name: clientId
      required: true
      schema:
        type: string
    post:
      operationId: CreateApiKeyForServiceAccount
      requestBody:
        content:
          application/json:
            schema:
              properties:
                comment:
                  description: Comment for the API key
                  type: string
                expires_in:
                  description: Expiration period for the API key
                  type: string
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiKey'
          description: successful operation
      security:
      - BearerAuth:
        - api_key:write
      summary: Create api key for service account
      tags:
      - workspaces
  /workspaces/{workspaceName}/service_accounts/{clientId}/api_keys/{apiKeyId}:
    delete:
      operationId: DeleteApiKeyForServiceAccount
      responses:
        "200":
          description: successful operation
      security:
      - BearerAuth:
        - api_key:write
      summary: Delete api key for service account
      tags:
      - workspaces
    parameters:
    - description: Name of the workspace
      in: path
      name: workspaceName
      required: true
      schema:
        type: string
    - description: Client ID
      in: path
      name: clientId
      required: true
      schema:
        type: string
    - description: Api key id
      in: path
      name: apiKeyId
      required: true
      schema:
        type: string
  /workspaces/{workspaceName}/users:
    get:
      operationId: ListUsersInWorkspace
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/WorkspaceUser'
                type: array
          description: successful operation
      security:
      - BearerAuth:
        - workspaces:list
      summary: List all users in workspace
      tags:
      - workspaces
    post:
      operationId: InviteUserToWorkspace
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                email:
                  format: email
                  type: string
              type: object
        description: Email of the user to invite
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PendingInvitation'
          description: successful operation
        "400":
          description: invalid email format
        "404":
          description: workspace not found
      security:
      - BearerAuth:
        - workspaces:invite
      summary: Invite user by email to workspace
      tags:
      - workspaces
  /workspaces/{workspaceName}/users/{subOrEmail}:
    delete:
      operationId: RemoveUserFromWorkspace
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      - description: Sub or email of the user
        in: path
        name: subOrEmail
        required: true
        schema:
          type: string
      responses:
        "200":
          description: User successfully removed or invitation revoked
        "404":
          description: Workspace or user not found
      security:
      - BearerAuth:
        - workspaces:remove
      summary: Remove user from workspace or revoke invitation
      tags:
      - workspaces
    put:
      operationId: UpdateUserRoleInWorkspace
      parameters:
      - description: Name of the workspace
        in: path
        name: workspaceName
        required: true
        schema:
          type: string
      - description: Sub or email of the user
        in: path
        name: subOrEmail
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              properties:
                role:
                  description: The new role to assign to the user
                  type: string
              required:
              - role
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkspaceUser'
          description: User role updated successfully
        "400":
          description: Invalid role provided
        "404":
          description: Workspace or user not found
      security:
      - BearerAuth:
        - workspaces:update
      summary: Update user role in workspace
      tags:
      - workspaces
security:
- BearerAuth:
  - admin
